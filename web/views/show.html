<!DOCTYPE html>
<html>

<head>
    <title>XLOG {{.Date}}</title>
    <meta charset="UTF-8">
    <meta name="canonical-date" content="{{.Date}}" />
    <meta name="canonical-query" content="{{.Query.ToURLQuery}}" />
    <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" crossorigin="anonymous">
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link href="https://cdn.bootcss.com/bootstrap-select/1.13.1/css/bootstrap-select.min.css" rel="stylesheet" crossorigin="anonymous">
    <link href="https://cdn.bootcss.com/bootstrap-datepicker/1.8.0/css/bootstrap-datepicker.min.css" rel="stylesheet" crossorigin="anonymous">
    <style>
        body {
            padding-top: 15px;
            padding-bottom: 15px;
        }

        pre {
            white-space: pre-wrap;
            white-space: -moz-pre-wrap;
            white-space: -pre-wrap;
            white-space: -o-pre-wrap;
            word-wrap: break-word;
            word-break: break-all;
            margin-bottom: 0;
        }

        .form-control::placeholder {
            color: #b5b5b5;
        }

        span.log-meta {
            margin-left: 0.5rem;
        }

        span.log-meta>span {
            font-family: monospace;
        }

        div.log-entry {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }

        div.result-meta {
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <div id="sidebar" class="col-md-3 col-lg-2" style="position: fixed; z-index: 1000;">
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel panel-default">
                            <ul class="list-group list-group-flush">
                                <a href="#" id="date-selector" class="list-group-item" data-date="{{.Date}}">
                                    <b>{{.Date}}</b>&nbsp;
                                    <i class="fa fa-edit"></i>
                                </a>
                                <li class="list-group-item">
                                    <b>本日总记录数</b>
                                    <span class="pull-right">{{.TotalCount}}</span>
                                </li>
                                <li class="list-group-item">
                                    <b>本日磁盘占用</b>
                                    <span class="pull-right">{{.Stats.StorageSizeFormatted}}</span>
                                </li>
                            </ul>
                        </div>

                        <div class="panel panel-default">
                            <div class="panel-body">
                                {{ template "common/form" . }}
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="col-md-9 col-md-offset-3 col-lg-10 col-lg-offset-2 results">
                {{ if .Results }} {{ range .Results }} {{ template "common/row" . }} {{ end }} {{ else }}
                <div class="row text-center">
                    <div class="col-md-12 result-meta">
                        没有记录
                    </div>
                </div>
                {{ end }}
            </div>
        </div>
    </div>

    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.bootcss.com/bootstrap-select/1.13.1/js/bootstrap-select.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.bootcss.com/bootstrap-select/1.13.1/js/i18n/defaults-zh_CN.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.bootcss.com/bootstrap-datepicker/1.8.0/js/bootstrap-datepicker.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.bootcss.com/bootstrap-datepicker/1.8.0/locales/bootstrap-datepicker.zh-CN.min.js" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function () {
            // setup date picker
            $("#date-selector").datepicker({
                container: '#sidebar',
                format: 'yyyy-mm-dd',
                language: "zh-CN",
                todayHighlight: true,
                todayBtn: true,
            }).on("changeDate", function (e) {
                window.location = "/" + e.format(0) + "?" + $('meta[name="canonical-query"]').attr("content")
            });
        })
    </script>
</body>

</html>